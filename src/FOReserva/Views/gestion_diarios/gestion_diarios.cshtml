@model FOReserva.Models.Diarios.Cvista_Diarios

<div class="heading-title">
    <h3><span>Diarios de Viaje</span></h3>
</div>
@*<div class="row text-center">
        <a href="#"><button type="button" class="btn btn-default btn-lg"><i class="fa fa-book"></i>Crear un Diario de Viaje</button></a>
    </div>*@
@using (Html.BeginForm("buscarDiarios", "gestion_diarios", null, FormMethod.Post, new { @id = "formBuscarDiarios", @class = "form-horizontal" }))
{
    <fieldset>

        <input type="hidden" name="action" value="contact_send" />

        <div class="row">
            <div class="form-group">
                <div class="col-sm-12">
                    <label>Prueba</label>
                    @Html.TextBoxFor(m => m._prueba, null, new { @id = "testea", @class = "form-control required", @name = "diario[prueba]", @placeholder="Escribe algo"})                                         
                </div>          
                <div id="prueba_null" style="display: none;" class="has-error error col-sm-12">
                    <p><i class="fa fa-times-circle" aria-hidden="true"></i> Escribir Texto</p>
                </div>        
            </div>
        </div> 

        <div class="row">
            <div class="form-group">
                <div class="col-sm-6">
                    <label>Inicio desde</label>
                    @Html.TextBoxFor(m => m._fecha_ini, null, new { @id = "f_ini", @class = "form-control datepicker required", @name = "diario[f_inicio]", @placeholder = "Seleccionar", @onkeydown = "return false" })
                </div>
                <div class="col-sm-6">
                    <label>Inicio hasta</label>
                    @Html.TextBoxFor(m => m._fecha_fin, null, new { @id = "f_fin", @class = "form-control datepicker required", @name = "diario[f_fin]", @placeholder = "Seleccionar", @onkeydown = "return false" })
                </div>
                <div id="fec_null" style="display: none;" class="has-error error col-sm-6">
                    <p><i class="fa fa-times-circle" aria-hidden="true"></i> Escribir Fecha</p>
                </div>
                <div id="fec_formato" style="display: none;" class="has-error error col-sm-6">
                    <p><i class="fa fa-times-circle" aria-hidden="true"></i> Formato inv&aacute;lido</p>
                </div>  
            </div>
        </div>


        <script type="text/javascript">
            $(function () { // will trigger when the document is ready
                $('.datepicker').datepicker({ format: "dd/mm/yyyy"}); //Initialise any date pickers
            });
        </script>

    </fieldset>

<div class="row text-center">
    <div class="col-md-12">
        <button type="button" id="buscarDiarios" class="btn btn-primary"><i class="fa fa-search"></i>Buscar</button>
    </div>
</div>
<script>
    //Unificación del jQuery para búsqueda
    function buscar(a) {
        a.preventDefault();
        var form = $("#formBuscarDiarios");
        $.ajax({
            url: "gestion_diarios/buscarDiarios",
            data: form.serialize(),
            type: 'POST',
            success: function (data) {
                $(".error").hide();
                $("#testea").removeClass("has-error");
                $("#f_ini").removeClass("has-error");
                $("#f_fin").removeClass("has-error");
                var texto = $("#testea").val();
                var inicio = $("#f_ini").val();
                var fin = $("#f_fin").val();
                var formato = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;

                var win = true;

                if (texto == "" || texto == undefined) {
                    $("#testea").addClass("has-error");
                    $("#prueba_null").fadeIn();
                    win = false;
                }
                if (inicio == "" || inicio == undefined || !inicio.match(formato)) {
                    if (inicio == "" || inicio == undefined) {
                        $("#f_ini").addClass("has-error");
                        $("#fec_null").fadeIn();
                        win = false;
                    }
                    else {
                        $("#f_ini").addClass("has-error");
                        $("#fec_formato").fadeIn();
                        win = false;
                    }
                }

                if (fin == "" || fin == undefined || !fin.match(formato)) {
                    if (fin == "" || fin == undefined) {
                        $("#f_fin").addClass("has-error");
                        $("#fec_null").fadeIn();
                        win = false;
                    }
                    else {
                        $("#f_fin").addClass("has-error");
                        $("#fec_formato").fadeIn();
                        win = false;
                    }
                }

                if (win) {
                    form.submit();
                }
                else
                    alert(data);
                
                /*$('#formBuscarVuelos')[0].reset();*/
            }
        });
    }

    $("#buscarDiarios").click(function (e) { buscar(e) });      //Evento de click en el botón Buscar
    $("#formBuscarDiarios").submit(function (e) { buscar(e) }); //Evento general de submit (ej. presionar ENTER)


</script>
}


<section>
    <div id="resultados" class="container">

        <div class="row">
            <!-- item -->
            <div class="col-md-1">
                <!-- company logo -->
                <img src="@Url.Content("~/Content/assets/images/noimage.jpg")" class="img-responsive img-thumbnail" alt="company logo">
            </div>
            <div class="col-md-10">
                <!-- company detail -->
                <h4 class="margin-bottom-10"><font color="black">De exploración en Tailandia</font></h4>
                <p>Lorem ipsum eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati</p>
                <button type="button" class="btn btn-primary">Ver el Diario Completo</button>
                <a href="#" class="text-success"><i class="fa fa-thumbs-up"></i> Like</a> <a href="#" class="text-danger"><i class="fa fa-thumbs-down"></i> Dislike</a>
            </div>
        </div><!-- /item -->

        <hr />

        <div class="row">
            <!-- item -->
            <div class="col-md-1">
                <!-- company logo -->
                <img src="@Url.Content("~/Content/assets/images/noimage.jpg")" class="img-responsive img-thumbnail" alt="company logo">
            </div>
            <div class="col-md-10">
                <!-- company detail -->
                <h4 class="margin-bottom-10"><font color="black">Dubai y su petroleo.</font></h4>
                <p>Lorem ipsum eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati</p>
                <button type="button" class="btn btn-primary">Ver el Diario Completo</button>
                <a href="#" class="text-success"><i class="fa fa-thumbs-up"></i> Like</a> <a href="#" class="text-danger"><i class="fa fa-thumbs-down"></i> Dislike</a>
            </div>
        </div><!-- /item -->

        <hr />

        <div class="row">
            <!-- item -->
            <div class="col-md-1">
                <!-- company logo -->
                <img src="@Url.Content("~/Content/assets/images/noimage.jpg")" class="img-responsive img-thumbnail" alt="company logo">
            </div>
            <div class="col-md-10">
                <!-- company detail -->
                <h4 class="margin-bottom-10"><font color="black">No hay arepas en Caracas.</font></h4>
                <p>Lorem ipsum eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati</p>
                <button type="button" class="btn btn-primary">Ver el Diario Completo</button>
                <a href="#" class="text-success"><i class="fa fa-thumbs-up"></i> Like</a> <a href="#" class="text-danger"><i class="fa fa-thumbs-down"></i> Dislike</a>
            </div>
        </div><!-- /item -->

        <hr />

        <div class="row">
            <!-- item -->
            <div class="col-md-1">
                <!-- company logo -->
                <img src="@Url.Content("~/Content/assets/images/noimage.jpg")" class="img-responsive img-thumbnail" alt="company logo">
            </div>
            <div class="col-md-10">
                <!-- company detail -->
                <h4 class="margin-bottom-10"><font color="black">Trump me botó de Florida</font></h4>
                <p>Lorem ipsum eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati</p>
                <button type="button" class="btn btn-primary">Ver el Diario Completo</button>
                <a href="#" class="text-success"><i class="fa fa-thumbs-up"></i> Like</a> <a href="#" class="text-danger"><i class="fa fa-thumbs-down"></i> Dislike</a>
            </div>
        </div><!-- /item -->

        <hr />

        <div class="row">
            <!-- item -->
            <div class="col-md-1">
                <!-- company logo -->
                <img src="@Url.Content("~/Content/assets/images/noimage.jpg")" class="img-responsive img-thumbnail" alt="company logo">
            </div>
            <div class="col-md-10">
                <!-- company detail -->
                <h4 class="margin-bottom-10"><font color="black">Raspando cupo en Panamá</font></h4>
                <p>Lorem ipsum eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati</p>
                <button type="button" class="btn btn-primary">Ver el Diario Completo</button>
                <a href="#" class="text-success"><i class="fa fa-thumbs-up"></i> Like</a> <a href="#" class="text-danger"><i class="fa fa-thumbs-down"></i> Dislike</a>
            </div>
        </div><!-- /item -->

    </div>
</section>
